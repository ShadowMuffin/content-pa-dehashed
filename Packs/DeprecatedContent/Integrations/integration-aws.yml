category: IT Services
commonfields:
  id: Amazon Web Services
  version: -1
configuration:
- defaultvalue: https://ec2.amazonaws.com/
  display: The url to amazon region
  name: url
  required: true
  type: 0
- defaultvalue: ''
  display: Access Key ID
  name: accessKeyID
  required: true
  type: 0
- defaultvalue: ''
  display: Secret Access Key
  name: secretAccessKey
  required: true
  type: 4
deprecated: true
description: AWS - amazon public cloud , EC2 service
detaileddescription: 'Url must be of the form : https://ec2.region.amazonaws.com/
  (like https://ec2.eu-central-1.amazonaws.com/)

  to include a specific region.

  Secret Access Key and Access Key ID can be obtained from IAM page : https://console.aws.amazon.com/iam/.

  Will work only with EC2 service.'
display: Amazon Web Services (Deprecated)
fromversion: 1.6.2
hidden: false
image: data:image/png;base64,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
name: Amazon Web Services
script:
  commands:
  - arguments:
    - default: true
      description: The ID of the AMI
      name: imageId
      required: true
    - description: 'The instance type. For more information, see Instance Types in
        the Amazon Elastic Compute Cloud User Guide.  Default: m1.small'
      name: instanceType
    - description: The name of the key pair. You can create a key pair using CreateKeyPair
        or ImportKeyPair.
      name: keyName
    - description: '[EC2-VPC] The ID of the subnet to launch the instance into.'
      name: subnetId
    - description: '[EC2-VPC] The primary IP address. You must specify a value from
        the IP address range of the subnet.  Only one private IP address can be designated
        as primary. Therefore, you can''t specify this parameter if PrivateIpAddresses.n.Primary
        is set to true and PrivateIpAddresses.n.PrivateIpAddress is set to an IP address.'
      name: privateIpAddress
    - description: The Availability Zone of the instance.
      name: availabilityZone
    - description: 'Security group name, Default: Amazon EC2 uses the default security
        group.'
      name: securityGroup
    - description: Headers to display in Human readable format
      name: headers
    deprecated: true
    description: create ec2 aws instances from image
    name: aws-run-instance
  - arguments:
    - default: true
      description: instance ID
      name: instanceId
      required: true
    - description: ' Forces the instances to stop (Default: false). The instances
        do not have an opportunity to flush file system caches or file system metadata.
        If you use this option, you must perform file system check and repair procedures.
        This option is not recommended for Windows instances.'
      name: force
    - description: Headers to display in Human readable format
      name: headers
    deprecated: true
    description: stop ec2 aws instances
    name: aws-stop-instance
  - arguments:
    - default: true
      description: The ID of the instance
      name: instanceId
      required: true
    - description: 'A name for the new image - Constraints: 3-128 alphanumeric characters,
        parentheses (()), square brackets ([]), spaces ( ), periods (.), slashes (/),
        dashes (-), single quotes (''), at-signs (@), or underscores(_)'
      name: name
      required: true
    - description: By default, Amazon EC2 attempts to shut down and reboot the instance
        before creating the image. If the 'No Reboot' option is set(give value 'true'
        for that) Amazon EC2 doesn't shut down the instance before creating the image.
        When this option is used, file system integrity on the created image can't
        be guaranteed.
      name: noReboot
    - description: A description for the new image
      name: description
    - description: Headers to display in Human readable format
      name: headers
    deprecated: true
    description: Creates an Amazon EBS-backed AMI from an Amazon EBS-backed instance
      that is either running or stopped.
    name: aws-create-image
  - arguments:
    - default: true
      description: instance ID
      name: instanceId
      required: true
    - description: Headers to display in Human readable format
      name: headers
    deprecated: true
    description: Starts an Amazon EBS-backed AMI that you've previously stopped.
    name: aws-start-instance
  - arguments:
    - default: true
      description: The ID of the EBS volume
      name: volumeId
      required: true
    - description: A description for the snapshot
      name: description
    - description: Headers to display in Human readable format
      name: headers
    deprecated: true
    description: Creates a snapshot of an EBS volume and stores it in Amazon S3. You
      can use snapshots for backups, to make copies of EBS volumes, and to save data
      before shutting down an instance.
    name: aws-create-volume-snapshot
  - arguments:
    - default: true
      description: instance ID
      name: instanceId
    - description: Filter search by public IPv4 address of the instance.
      name: ipAddress
    - description: Filter by the name of the key pair used when the instance was launched.
      name: keyName
    - description: Headers to display in Human readable format
      name: headers
    - description: Additional terms for filtering instances (key=value,key=value...)
      name: customFilters
    deprecated: true
    description: Describe Instances - Describes one of your instances.
    name: aws-get-instance-info
  - arguments:
    - default: true
      description: Security Group ID
      name: sgId
    - description: Security Group Name
      name: sgName
    - description: Headers to display in Human readable format
      name: headers
    deprecated: true
    description: Get EC2 Security Group Information
    name: aws-get-sg-info
  - arguments:
    - default: true
      description: EBS Volume ID
      name: volumeId
      required: true
    - description: Headers to display in Human readable format
      name: headers
    deprecated: true
    description: Get EC2 EBS Volume Information
    name: aws-get-ebs-volume-info
  script: "var insecure = params.insecure;\n\nvar accessKey = params.accessKeyID;\n\
    \nvar secret = params.secretAccessKey;\n\nvar awsUrl = params.url;\n\nvar apiVersion\
    \ = '2016-09-15';\n\nvar sendRequest = function(method, url) {\n    var res =\
    \ http(\n        url,\n        {\n            Method: method,\n            AuthProtocol:\
    \ ['aws',accessKey,secret]\n        },\n        insecure\n    );\n    if (res.StatusCode\
    \ < 200 || res.StatusCode >= 300) {\n        throw 'Failed to use url ' + url\
    \ + ', request status code: ' + res.StatusCode + ' and Body: ' + res.Body + '.';\n\
    \    }\n    return JSON.parse(x2j(res.Body));\n};\n\nvar buildMdAndContext = function\
    \ (data, actionName, contextMapper) {\n    var mdContext = {md: [], context: {VM\
    \ : []}};\n    if(!Array.isArray(data)) {\n        data = [data];\n    }\n   \
    \ data.forEach(function (element) {\n        var contextObj ={};\n        element\
    \ = dq(element, actionName + 'Response');\n        for(prop in contextMapper)\
    \ {\n            var dqRes = dq(element, contextMapper[prop]);\n            contextObj[prop]\
    \ = dqRes !== undefined ? dqRes : \"\";\n        }\n        if(Object.keys(contextObj).length\
    \ !== 0) {\n            mdContext.context.VM.push(contextObj);\n        }\n  \
    \      mdContext.md.push(treeToFlattenObject(element));\n    });\n    return mdContext;\n\
    };\n\nvar postAwsWithParams = function (urlArgs, contextMapper) {\n    try {\n\
    \        var responseObj = sendRequest('POST', awsUrl + encodeToURLQuery(urlArgs));\n\
    \        var mdAndContext = buildMdAndContext(responseObj, urlArgs.Action, contextMapper);\n\
    \        var md = tblToMd(command, mdAndContext['md'], argToList(args.headers));\n\
    \        return {Type: entryTypes.note, Contents: responseObj, ContentsFormat:\
    \ formats.json, HumanReadable: md, ReadableContentsFormat: formats.markdown, EntryContext:\
    \ mdAndContext['context']};\n    } catch (err) {\n        return err;\n    }\n\
    }\n\nvar createInstance = function(imageId, instanceType, keyName, subnetId, privateIpAddress,\
    \ availabilityZone, securityGroup) {\n    var urlArgs = {};\n    urlArgs.ImageId\
    \ = imageId;\n    urlArgs.MaxCount = 1;\n    urlArgs.MinCount = 1;\n    urlArgs.Action\
    \ = 'RunInstances';\n    urlArgs.Version = apiVersion;\n    if ((instanceType)\
    \ && (instanceType.length > 0)) {\n        urlArgs.InstanceType = instanceType;\n\
    \    }\n    if ((keyName) && (keyName.length > 0)) {\n        urlArgs.KeyName\
    \ = keyName;\n    }\n    if ((subnetId) && (subnetId.length > 0)) {\n        urlArgs.SubnetId\
    \ = subnetId;\n    }\n    if ((privateIpAddress) && (privateIpAddress.length >\
    \ 0)) {\n        urlArgs.PrivateIpAddress = privateIpAddress;\n    }\n    if ((privateIpAddress)\
    \ && (privateIpAddress.length > 0)) {\n        urlArgs.PrivateIpAddress = privateIpAddress;\n\
    \    }\n    if ((availabilityZone) && (availabilityZone.length > 0)) {\n     \
    \   urlArgs['Placement.AvailabilityZone'] = availabilityZone;\n    }\n    if ((securityGroup)\
    \ && (securityGroup.length > 0)) {\n        urlArgs['SecurityGroup.1'] = securityGroup;\n\
    \    }\n    var contextMapper =     {\n        ID: 'instancesSet.item.instanceId',\n\
    \        ImageID: 'instancesSet.item.imageId',\n        State: 'instancesSet.item.instanceState.name',\n\
    \        IPAddress: 'instancesSet.item.ipAddress',\n        PrivateIPAddress:\
    \ 'instancesSet.item.privateIpAddress',\n        Region: 'instancesSet.item.placement.availabilityZone',\n\
    \        Hypervisor: 'instancesSet.item.hypervisor',\n        Name: 'instancesSet.item.tagSet.item.key',\n\
    \        Type: 'instancesSet.item.instanceType',\n        LaunchTime: 'instancesSet.item.launchTime',\n\
    \        DNSName: 'instancesSet.item.dnsName'\n    };\n    return postAwsWithParams(urlArgs,\
    \ contextMapper);\n};\n\nvar stopInstance = function(instanceId, force) {\n  \
    \  var urlArgs = {};\n    urlArgs.Action = 'StopInstances';\n    urlArgs['InstanceId.1']=\
    \ instanceId;\n    urlArgs.Version = apiVersion;\n    if ((force) && (force.length\
    \ > 0) && (force == 'true')) {\n        urlArgs.Force = true;\n    }\n    var\
    \ contextMapper = {\n        ID: 'instancesSet.item.instanceId',\n        State:\
    \ 'instancesSet.item.currentState.name',\n    };\n    return postAwsWithParams(urlArgs,\
    \ contextMapper);\n};\n\nvar startInstance = function(instanceId) {\n    var urlArgs\
    \ = {};\n    urlArgs.Action = 'StartInstances';\n    urlArgs['InstanceId.1']=\
    \ instanceId;\n    urlArgs.Version = apiVersion;\n    var contextMapper = {\n\
    \        ID: 'instancesSet.item.instanceId',\n        State: 'instancesSet.item.currentState.name',\n\
    \    };\n    return postAwsWithParams(urlArgs, contextMapper);\n};\n\nvar createImage\
    \ = function(instanceId,name,noReboot,description) {\n    var urlArgs = {};\n\
    \    urlArgs.Action = 'CreateImage';\n    urlArgs.InstanceId = instanceId;\n \
    \   urlArgs.Version = apiVersion;\n    urlArgs.Name = name;\n    if ((noReboot)\
    \ && (noReboot.length > 0) && (noReboot == 'true')) {\n        urlArgs.NoReboot\
    \ = true;\n    }\n    if ((description) && (description.length > 0)) {\n     \
    \   urlArgs.Description = description;\n    }\n\n    return postAwsWithParams(urlArgs);\n\
    };\n\nvar createVolSnapshot = function(volId,description) {\n    var urlArgs =\
    \ {};\n    urlArgs.Action = 'CreateSnapshot';\n    urlArgs.VolumeId = volId;\n\
    \    urlArgs.Version = apiVersion;\n\n    if ((description) && (description.length\
    \ > 0)) {\n        urlArgs.Description = description;\n    }\n    return postAwsWithParams(urlArgs);\n\
    };\n\nvar getInstanceInfo = function(instanceId,ip,keyName,customFilters) {\n\
    \    var urlArgs = {};\n    urlArgs.Action = 'DescribeInstances';\n    urlArgs.Version\
    \ = apiVersion;\n\n    var filterid = 1;\n    var filter;\n\n    if ((instanceId)\
    \ && (instanceId.length > 0)) {\n        filter = 'Filter.'+filterid.toString();\n\
    \        urlArgs[filter+'.Name'] = 'instance-id';\n        urlArgs[filter+'.Value']\
    \ = instanceId;\n        filterid = filterid + 1;\n\n    }\n    if ((ip) && (ip.length\
    \ > 0)) {\n        filter = 'Filter.'+filterid.toString();\n        urlArgs[filter+'.Name']\
    \ = 'ip-address';\n        urlArgs[filter+'.Value'] = ip;\n        filterid =\
    \ filterid + 1;\n\n    }\n    if ((keyName) && (keyName.length > 0)) {\n     \
    \   filter = 'Filter.'+filterid.toString();\n        urlArgs[filter+'.Name'] =\
    \ 'key-name';\n        urlArgs[filter+'.Value'] = keyName;\n        filterid =\
    \ filterid + 1;\n    }\n    if ((customFilters) && (customFilters.length > 0))\
    \ {\n        var filters = customFilters.split(',');\n        customFilters.split(',').forEach(function\
    \ (customFilter) {\n            filter = 'Filter.'+filterid.toString();\n    \
    \        urlArgs[filter+'.Name'] = customFilter.split(\"=\")[0];\n           \
    \ urlArgs[filter+'.Value'] = customFilter.split(\"=\")[1];\n            filterid\
    \ = filterid + 1;\n        });\n    }\n\n    var contentMapper =         {\n \
    \       ID: 'reservationSet.item.instancesSet.item.instanceId',\n        ImageID:\
    \ 'reservationSet.item.instancesSet.item.imageId',\n        State: 'reservationSet.item.instancesSet.item.instanceState.name',\n\
    \        IPAddress: 'reservationSet.item.instancesSet.item.ipAddress',\n     \
    \   PrivateIPAddress: 'reservationSet.item.instancesSet.item.privateIpAddress',\n\
    \        Region: 'reservationSet.item.instancesSet.item.placement.availabilityZone',\n\
    \        Hypervisor: 'reservationSet.item.instancesSet.item.hypervisor',\n   \
    \     Name: 'reservationSet.item.instancesSet.item.tagSet.item.key',\n       \
    \ Type: 'reservationSet.item.instancesSet.item.instanceType',\n        LaunchTime:\
    \ 'reservationSet.item.instancesSet.item.launchTime',\n        DNSName: 'reservationSet.item.instancesSet.item.dnsName'\n\
    \    };\n    return postAwsWithParams(urlArgs, contentMapper);\n};\n\nvar getSecurityGroupInfo\
    \ = function(sgId,sgName) {\n    var urlArgs = {};\n    urlArgs.Action = 'DescribeSecurityGroups';\n\
    \    urlArgs.Version = apiVersion;\n\n    var filterid = 1;\n    var filter;\n\
    \n    if ((sgId) && (sgId.length > 0)) {\n        filter = 'Filter.'+filterid.toString();\n\
    \        urlArgs[filter+'.Name'] = 'group-id';\n        urlArgs[filter+'.Value']\
    \ = sgId;\n        filterid = filterid + 1;\n    }\n    if ((sgName) && (sgName.length\
    \ > 0)) {\n        filter = 'Filter.'+filterid.toString();\n        urlArgs[filter+'.Name']\
    \ = 'group-name';\n        urlArgs[filter+'.Value'] = sgName;\n        filterid\
    \ = filterid + 1;\n    }\n    return postAwsWithParams(urlArgs);\n};\n\nvar getEbsVolumeInfo\
    \ = function(volumeId) {\n    var urlArgs = {};\n    urlArgs.Action = 'DescribeVolumes';\n\
    \    urlArgs.Version = apiVersion;\n\n    var filterid = 1;\n    var filter;\n\
    \n    if ((volumeId) && (volumeId.length > 0)) {\n        filter = 'Filter.'+filterid.toString();\n\
    \        urlArgs[filter+'.Name'] = 'volume-id';\n        urlArgs[filter+'.Value']\
    \ = volumeId;\n        filterid = filterid + 1;\n    }\n    return postAwsWithParams(urlArgs);\n\
    };\n\nswitch (command) {\n    case 'test-module':\n        var urlArgs = {};\n\
    \        urlArgs.Action = 'DescribeRegions';\n        urlArgs.Version = apiVersion;\n\
    \        sendRequest('GET', awsUrl + encodeToURLQuery(urlArgs));\n        return\
    \ 'ok';\n    case 'aws-run-instance':\n        return createInstance(args.imageId,\
    \ args.instanceType, args.keyName, args.subnetId, args.privateIpAddress, args.availabilityZone,\
    \ args.securityGroup);\n    case 'aws-stop-instance':\n        return stopInstance(args.instanceId,\
    \ args.force);\n    case 'aws-start-instance':\n        return startInstance(args.instanceId);\n\
    \    case 'aws-create-image':\n        return createImage(args.instanceId, args.name,\
    \ args.noReboot, args.description);\n    case 'aws-create-volume-snapshot':\n\
    \        return createVolSnapshot(args.volumeId, args.description);\n    case\
    \ 'aws-get-instance-info':\n        return getInstanceInfo(args.instanceId, args.ipAddress,\
    \ args.keyName, args.customFilters);\n    case 'aws-get-sg-info':\n        return\
    \ getSecurityGroupInfo(args.sgId, args.sgName);\n    case 'aws-get-ebs-volume-info':\n\
    \        return getEbsVolumeInfo(args.volumeId);\n}"
  type: javascript
tests:
- No test
toversion: 4.1.9
