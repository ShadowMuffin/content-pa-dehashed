args:
- default: true
  description: 'ServiceNow syntax: http://wiki.servicenow.com/index.php?title=Encoded_Query_Strings'
  name: query
- description: Property fields to include in results
  name: fields
comment: List tickets from ServiceNow
commonfields:
  id: SNListTickets
  version: -1
dependson:
  must:
  - servicenow-incidents-query
deprecated: true
name: SNListTickets
script: "res = []\ndArgs = demisto.args()\nresCmd = demisto.executeCommand(\"servicenow-incidents-query\"\
  , dArgs)\ntry:\n    for entry in resCmd:\n        if isError(entry):\n         \
  \   res = resCmd\n            break\n        else:\n            myData = demisto.get(entry,\
  \ 'Contents.result')\n            if myData:\n                myData = [{k: formatCell(row[k])\
  \ for k in row} for row in myData]\n                res.append({\"Type\": entryTypes[\"\
  note\"], \"ContentsFormat\": formats[\"table\"], \"Contents\": myData})\n      \
  \      else:\n                res.append({\"Type\": entryTypes[\"error\"], \"ContentsFormat\"\
  : formats[\"text\"],\n                            \"Contents\": \"Could not extract\
  \ result list from response: \" + json.dumps(entry[\"Contents\"])})\nexcept Exception\
  \ as ex:\n    res.append({\"Type\": entryTypes[\"error\"], \"ContentsFormat\": formats[\"\
  text\"],\n                \"Contents\": \"Error occurred while parsing output from\
  \ command. Exception info:\\n\" + str(ex) + \"\\n\\nInvalid output:\\n\" + str(resCmd)})\n\
  demisto.results(res)"
scripttarget: 0
subtype: python2
system: true
tags:
- servicenow
timeout: 0s
toversion: 4.1.9
type: python
