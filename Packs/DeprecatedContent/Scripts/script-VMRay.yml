args:
- default: true
  description: The ID of a file entry to upload
  name: entry_id
comment: Deprecated, use "Detonate File - VMRay playbook instead"
commonfields:
  id: 7b02fa0f-94ff-48c7-8350-b4e353702e73
  version: -1
dependson:
  must:
  - VMRay|||upload_sample
deprecated: true
enabled: true
name: VMRay
runas: DBotWeakRole
runonce: false
script: "import json\nimport time\nres = []\nentry_id = demisto.args()['entry_id']\n\
  try:\n  data = demisto.executeCommand(\"upload_sample\", {\"entry_id\":entry_id})[0][\"\
  Contents\"][\"data\"]\n  if data:\n      open_jobs = data[\"jobs\"]\n      sample_id\
  \ = data[\"samples\"]\n      if sample_id:\n          sample_id = data[\"samples\"\
  ][0][\"sample_id\"]\n          demisto.executeCommand(\"scheduleEntry\", {\"command\"\
  : \"!vmray_getResults sample_id={} \".format(str(sample_id)), \"cron\": \"*/1 *\
  \ * * *\"})\n      else:\n          res.append({\"Type\": entryTypes[\"error\"],\
  \ \"ContentsFormat\": formats[\"text\"],\n                          \"Contents\"\
  : \"Could not extract result list from response: \" + str(data[\"errors\"][0][\"\
  error_msg\"])})\n      demisto.results(res)\n\nexcept Exception as ex:\n  res.append({\"\
  Type\": entryTypes[\"error\"], \"ContentsFormat\": formats[\"text\"],\n        \
  \      \"Contents\": \"Error occurred while parsing output from command. Exception\
  \ info:\\n\" + str(ex) + \"\\n\\nInvalid output:\\n\" + str(entry_id)})"
scripttarget: 0
subtype: python2
tags:
- file
tests:
- No tests
timeout: 0s
toversion: 4.1.9
type: python
