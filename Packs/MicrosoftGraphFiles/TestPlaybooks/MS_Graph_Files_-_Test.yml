id: test_MsGraphFiles
inputs: []
name: test_MsGraphFiles
outputs: []
sourceplaybookid: test_MsGraphFiles
starttaskid: '0'
tasks:
  '0':
    id: '0'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '1'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: 5a84b8d3-9296-433d-81b0-5ecefebda1f3
      iscommand: false
      name: ''
      version: -1
    taskid: 5a84b8d3-9296-433d-81b0-5ecefebda1f3
    timertriggers: []
    type: start
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 50\n  }\n}"
  '1':
    id: '1'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '24'
    note: false
    quietmode: 0
    scriptarguments:
      all:
        simple: 'yes'
      index: {}
      key: {}
      keysToKeep: {}
      subplaybook: {}
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Delete field from context
      id: cbb13684-d442-40c1-8e2d-699f0a24042e
      iscommand: false
      name: Delete Context
      scriptName: DeleteContext
      type: regular
      version: -1
    taskid: cbb13684-d442-40c1-8e2d-699f0a24042e
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 195\n  }\n}"
  '10':
    id: '10'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '41'
    note: false
    quietmode: 0
    scriptarguments:
      all:
        simple: 'no'
      index: {}
      key:
        simple: ${MsGraphFiles}
      keysToKeep: {}
      subplaybook: {}
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Delete field from context
      id: b3f800b2-94a5-4133-8932-0f142d602f10
      iscommand: false
      name: Delete MsGraphFiles Context
      scriptName: DeleteContext
      type: regular
      version: -1
    taskid: b3f800b2-94a5-4133-8932-0f142d602f10
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 3750\n  }\n}"
  '11':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              simple: MsGraphFiles.ReplacedFiles.Name
          operator: isEqualString
          right:
            value:
              simple: playbook1.txt
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ReplacedFiles.ParentReference.ID
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ReplacedFiles.OdataContext
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ReplacedFiles.File.Hashes
                root: MsGraphFiles
          operator: isExists
      label: 'yes'
    id: '11'
    ignoreworker: false
    nexttasks:
      'yes':
      - '12'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: d189e57f-3be9-4675-8c73-1ca8c67f3fea
      iscommand: false
      name: Test If Replace Command
      type: condition
      version: -1
    taskid: d189e57f-3be9-4675-8c73-1ca8c67f3fea
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 4800\n  }\n}"
  '12':
    id: '12'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '13'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: 759f6a3e-5b88-420d-8c54-629913065339
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: 759f6a3e-5b88-420d-8c54-629913065339
    timertriggers: []
    type: title
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 4975\n  }\n}"
  '13':
    id: '13'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '14'
    note: false
    quietmode: 0
    scriptarguments:
      folder_name:
        simple: playbook_folder
      object_type:
        simple: drives
      object_type_id:
        simple: b!RDctFH7NTE-76fPa5-vcg-ouY54nVzJCtors1LmkYNRucDgOdrfDSYsD6zrQj9zi
      parent_id:
        simple: 01YGQTXW56Y2GOVW7725BZO354PWSELRRZ
    separatecontext: false
    skipunavailable: false
    task:
      brand: Microsoft_Graph_Files
      id: 35cac969-b427-4c63-8ab7-c099a429c39c
      iscommand: true
      name: Create New Folder In MS Graph
      script: Microsoft_Graph_Files|||msgraph-create-new-folder
      type: regular
      version: -1
    taskid: 35cac969-b427-4c63-8ab7-c099a429c39c
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 5120\n  }\n}"
  '14':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                accessor: CreatedFolders.Name
                root: MsGraphFiles
          operator: containsGeneral
          right:
            value:
              simple: playbook_folder
      - - left:
            iscontext: true
            value:
              complex:
                accessor: CreatedFolders.Folder.ChildCount
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: CreatedFolders.WebUrl
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: CreatedFolders.ID
                root: MsGraphFiles
          operator: isExists
      label: 'yes'
    id: '14'
    ignoreworker: false
    nexttasks:
      'yes':
      - '16'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: 7d159278-59f2-47a3-85a7-a3feccabb31f
      iscommand: false
      name: Test If New Folder Was Uploaded
      type: condition
      version: -1
    taskid: 7d159278-59f2-47a3-85a7-a3feccabb31f
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 5295\n  }\n}"
  '15':
    id: '15'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '32'
    note: false
    quietmode: 0
    scriptarguments:
      key:
        simple: UploadedFolderID
      value:
        complex:
          accessor: CreatedFolders.ID
          root: MsGraphFiles
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sets key/value pair in incident's context
      id: c7e01e35-1a4e-4998-8d03-ab9bd13a3ef2
      iscommand: false
      name: Save Folder ID In Context
      scriptName: SetContext
      type: regular
      version: -1
    taskid: c7e01e35-1a4e-4998-8d03-ab9bd13a3ef2
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 5790\n  }\n}"
  '16':
    id: '16'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '44'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: a34fe2f9-29d8-432d-8e74-61dc6897e6c0
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: a34fe2f9-29d8-432d-8e74-61dc6897e6c0
    timertriggers: []
    type: title
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 5470\n  }\n}"
  '17':
    id: '17'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '19'
    note: false
    quietmode: 0
    scriptarguments:
      item_id:
        complex:
          root: UploadedFileID
      object_type:
        simple: drives
      object_type_id:
        simple: b!ZAovhtvn4Eapf5FWtPaT7lybnnqOkQpPspFV4riUtXuy_S3BgrgsSp0DNvpsLWoV
    separatecontext: false
    skipunavailable: false
    task:
      brand: Microsoft_Graph_Files
      id: 00826119-620e-4878-891b-d0da68f9c4fe
      iscommand: true
      name: Test Download File From Graph
      script: Microsoft_Graph_Files|||msgraph-download-file
      type: regular
      version: -1
    taskid: 00826119-620e-4878-891b-d0da68f9c4fe
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 6315\n  }\n}"
  '18':
    id: '18'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '17'
    note: false
    quietmode: 0
    scriptarguments:
      all:
        simple: 'no'
      index: {}
      key:
        simple: File
      keysToKeep: {}
      subplaybook: {}
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Delete field from context
      id: 25dc81c0-147f-46a6-855e-cc232c83adb1
      iscommand: false
      name: Delete File Context
      scriptName: DeleteContext
      type: regular
      version: -1
    taskid: 25dc81c0-147f-46a6-855e-cc232c83adb1
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 6140\n  }\n}"
  '19':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                accessor: Name
                root: File
          operator: isEqualString
          right:
            iscontext: true
            value:
              complex:
                root: UploadedFileID
      label: 'yes'
    id: '19'
    ignoreworker: false
    nexttasks:
      'yes':
      - '35'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: 112c41f2-bb8b-4330-8259-1c689763a504
      iscommand: false
      name: Test If File Was Downloaded
      type: condition
      version: -1
    taskid: 112c41f2-bb8b-4330-8259-1c689763a504
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 6490\n  }\n}"
  '2':
    id: '2'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '40'
    note: false
    quietmode: 0
    scriptarguments:
      data:
        simple: test ms graph file
      entryId: {}
      filename:
        simple: playbook1.txt
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: 'Will create a file (using the given data input or entry ID) and
        upload it to current investigation war room.

        '
      id: ea86ac96-86b8-4cf9-8f15-d1c2d7606a63
      iscommand: false
      name: Upload New File To Demisto
      scriptName: FileCreateAndUpload
      type: regular
      version: -1
    taskid: ea86ac96-86b8-4cf9-8f15-d1c2d7606a63
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 2380\n  }\n}"
  '20':
    id: '20'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '33'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: 696b7b2f-f7ab-4727-83f3-c7a3ec318ba3
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: 696b7b2f-f7ab-4727-83f3-c7a3ec318ba3
    timertriggers: []
    type: title
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 6840\n  }\n}"
  '21':
    id: '21'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '39'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: Microsoft_Graph_Files
      description: Returns a list of the tenant sites.
      id: 341a5dc1-8989-4149-8987-fe6c0d1da0b2
      iscommand: true
      name: Test List Sites
      script: Microsoft_Graph_Files|||msgraph-list-sharepoint-sites
      type: regular
      version: -1
    taskid: 341a5dc1-8989-4149-8987-fe6c0d1da0b2
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 1710\n  }\n}"
  '22':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListSites.Value.[0].CreatedDateTime
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListSites.Value.[0].ID
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListSites.Value.[0].LastModifiedDateTime
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListSites.Value.[0].WebUrl
                root: MsGraphFiles
          operator: isExists
      label: 'yes'
    id: '22'
    ignoreworker: false
    nexttasks:
      'yes':
      - '23'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: 35bdc65e-ac8c-413a-8644-bfd5e252b537
      iscommand: false
      name: Test If Got Sites In Context
      type: condition
      version: -1
    taskid: 35bdc65e-ac8c-413a-8644-bfd5e252b537
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 2060\n  }\n}"
  '23':
    id: '23'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '2'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: b576aaa8-3935-4cae-8569-d9359ca5001a
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: b576aaa8-3935-4cae-8569-d9359ca5001a
    timertriggers: []
    type: title
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 2235\n  }\n}"
  '24':
    id: '24'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '34'
    note: false
    quietmode: 0
    scriptarguments:
      limit:
        simple: '1'
      next_page_url: {}
      site_id:
        simple: demistodev.sharepoint.com,defa2285-86ca-449f-911c-b5dbce34dfda,7a9e9b5c-918e-4f0a-b291-55e2b894b57b
    separatecontext: false
    skipunavailable: false
    task:
      brand: Microsoft_Graph_Files
      id: d25f0187-0753-4131-8049-301622a952a5
      iscommand: true
      name: List Drives In Site
      script: Microsoft_Graph_Files|||msgraph-list-drives-in-site
      type: regular
      version: -1
    taskid: d25f0187-0753-4131-8049-301622a952a5
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 370\n  }\n}"
  '25':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListDrives.Value.[0].CreatedDateTime
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListDrives.Value.[0].Owner.Group.ID
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListDrives.Value.[0].ID
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListDrives.Value.[0].CreatedBy.DisplayName
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListDrives.Value.[0].LastModifiedBy.ID
                root: MsGraphFiles
          operator: isExists
      label: 'yes'
    id: '25'
    ignoreworker: false
    nexttasks:
      'yes':
      - '26'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: d96490a5-93ba-42a7-8c60-d3df57834326
      iscommand: false
      name: Test If Site's Drives Are Saved In Context
      type: condition
      version: -1
    taskid: d96490a5-93ba-42a7-8c60-d3df57834326
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 720\n  }\n}"
  '26':
    id: '26'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '27'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: 0dcbded7-637b-4209-87d4-deba74f0e8ba
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: 0dcbded7-637b-4209-87d4-deba74f0e8ba
    timertriggers: []
    type: title
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 895\n  }\n}"
  '27':
    id: '27'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '38'
    note: false
    quietmode: 0
    scriptarguments:
      item_id: {}
      limit:
        simple: '3'
      next_page_url: {}
      object_type:
        simple: sites
      object_type_id:
        simple: demistodev.sharepoint.com,defa2285-86ca-449f-911c-b5dbce34dfda,7a9e9b5c-918e-4f0a-b291-55e2b894b57b
    separatecontext: false
    skipunavailable: false
    task:
      brand: Microsoft_Graph_Files
      description: This command list all the drive's files and folders
      id: 5cbf59ef-414f-4145-8a69-d334fa972965
      iscommand: true
      name: List All Drive's Children
      script: Microsoft_Graph_Files|||msgraph-list-drive-content
      type: regular
      version: -1
    taskid: 5cbf59ef-414f-4145-8a69-d334fa972965
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 1040\n  }\n}"
  '28':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListChildren.Children.Value.[0].ParentReference.ID
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListChildren.ParentID
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListChildren.Children.Value.[0].ID
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: ListChildren.Children.Value.[1].LastModifiedBy.DisplayName
                root: MsGraphFiles
          operator: isExists
      label: 'yes'
    id: '28'
    ignoreworker: false
    nexttasks:
      'yes':
      - '29'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: 65f131b2-e233-4c36-8acb-cd6a819f38cd
      iscommand: false
      name: Test If Drive Children List In Context
      type: condition
      version: -1
    taskid: 65f131b2-e233-4c36-8acb-cd6a819f38cd
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 1390\n  }\n}"
  '29':
    id: '29'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '21'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: 2cf4d006-a2a7-4f7e-8601-e48542658a30
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: 2cf4d006-a2a7-4f7e-8601-e48542658a30
    timertriggers: []
    type: title
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 1565\n  }\n}"
  '3':
    id: '3'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '4'
    note: false
    quietmode: 0
    scriptarguments:
      entry_id:
        complex:
          accessor: EntryID
          root: File
      file_name:
        simple: playbook1.txt
      object_type:
        simple: drives
      object_type_id:
        simple: b!ZAovhtvn4Eapf5FWtPaT7lybnnqOkQpPspFV4riUtXuy_S3BgrgsSp0DNvpsLWoV
      parent_id:
        simple: 01VX7CPKF6Y2GOVW7725BZO354PWSELRRZ
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: e27848a5-a470-49fb-8a5b-6b2cab20cf44
      iscommand: true
      name: Upload New File To Ms Graph
      script: '|||msgraph-upload-new-file'
      type: regular
      version: -1
    taskid: e27848a5-a470-49fb-8a5b-6b2cab20cf44
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 2730\n  }\n}"
  '30':
    id: '30'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '43'
    note: false
    quietmode: 0
    scriptarguments:
      item_id:
        complex:
          root: UploadedFileID
      object_type:
        simple: drives
      object_type_id:
        complex:
          root: UploadedFileParent
    separatecontext: false
    skipunavailable: false
    task:
      brand: Microsoft_Graph_Files
      id: 71ee01af-4387-43b5-895d-a1b9b19a108e
      iscommand: true
      name: Delete File From Graph
      script: Microsoft_Graph_Files|||msgraph-delete-file
      type: regular
      version: -1
    taskid: 71ee01af-4387-43b5-895d-a1b9b19a108e
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 7335\n  }\n}"
  '31':
    id: '31'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '9'
    note: false
    quietmode: 0
    scriptarguments:
      key:
        simple: UploadedFileParent
      value:
        complex:
          accessor: UploadedFiles.ParentReference.DriveId
          root: MsGraphFiles
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sets key/value pair in incident's context
      id: 90c64134-b49e-4045-8ae2-93ff14de25d9
      iscommand: false
      name: Save File DriveID
      scriptName: SetContext
      type: regular
      version: -1
    taskid: 90c64134-b49e-4045-8ae2-93ff14de25d9
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 3400\n  }\n}"
  '32':
    id: '32'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '18'
    note: false
    quietmode: 0
    scriptarguments:
      key:
        simple: UploadedFolderParentID
      value:
        complex:
          accessor: CreatedFolders.ParentReference.DriveId
          root: MsGraphFiles
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sets key/value pair in incident's context
      id: 9f407fcb-1998-43b0-828a-f3a179805268
      iscommand: false
      name: Save Folder Parent ID
      scriptName: SetContext
      type: regular
      version: -1
    taskid: 9f407fcb-1998-43b0-828a-f3a179805268
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 5965\n  }\n}"
  '33':
    id: '33'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '42'
    note: false
    quietmode: 0
    scriptarguments:
      item_id:
        complex:
          root: UploadedFolderID
      object_type:
        simple: drives
      object_type_id:
        complex:
          root: UploadedFolderParentID
    separatecontext: false
    skipunavailable: false
    task:
      brand: Microsoft_Graph_Files
      id: f77de60c-a11f-4403-859d-f73b0cf4804c
      iscommand: true
      name: Delete Folder From Graph
      script: Microsoft_Graph_Files|||msgraph-delete-file
      type: regular
      version: -1
    taskid: f77de60c-a11f-4403-859d-f73b0cf4804c
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 6985\n  }\n}"
  '34':
    id: '34'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '25'
    note: false
    quietmode: 0
    scriptarguments:
      seconds:
        simple: '5'
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sleep for X seconds
      id: 58d66b99-491e-42ee-8ec8-7f48804ac495
      iscommand: false
      name: sleep
      scriptName: Sleep
      type: regular
      version: -1
    taskid: 58d66b99-491e-42ee-8ec8-7f48804ac495
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 545\n  }\n}"
  '35':
    id: '35'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '20'
    note: false
    quietmode: 0
    scriptarguments:
      seconds:
        simple: '4'
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sleep for X seconds
      id: 56323dc2-851b-4746-8ff9-d5c14ce9f633
      iscommand: false
      name: Sleep
      scriptName: Sleep
      type: regular
      version: -1
    taskid: 56323dc2-851b-4746-8ff9-d5c14ce9f633
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 6665\n  }\n}"
  '36':
    id: '36'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '6'
    note: false
    quietmode: 0
    scriptarguments:
      seconds:
        simple: '6'
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sleep for X seconds
      id: 0361783c-5cd4-4c5c-860e-a35cb14422ae
      iscommand: false
      name: Sleep
      scriptName: Sleep
      type: regular
      version: -1
    taskid: 0361783c-5cd4-4c5c-860e-a35cb14422ae
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 4275\n  }\n}"
  '37':
    id: '37'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '11'
    note: false
    quietmode: 0
    scriptarguments:
      seconds:
        simple: '3'
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sleep for X seconds
      id: 39b83b71-f144-484e-8844-9a791a143a04
      iscommand: false
      name: Sleep
      scriptName: Sleep
      type: regular
      version: -1
    taskid: 39b83b71-f144-484e-8844-9a791a143a04
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 4625\n  }\n}"
  '38':
    id: '38'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '28'
    note: false
    quietmode: 0
    scriptarguments:
      seconds:
        simple: '3'
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sleep for X seconds
      id: 6435d52b-e15c-4c47-8bfc-6d42fdb99cbc
      iscommand: false
      name: Sleep
      scriptName: Sleep
      type: regular
      version: -1
    taskid: 6435d52b-e15c-4c47-8bfc-6d42fdb99cbc
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 1215\n  }\n}"
  '39':
    id: '39'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '22'
    note: false
    quietmode: 0
    scriptarguments:
      seconds:
        simple: '3'
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sleep for X seconds
      id: 131cde02-8588-46e6-8130-88b588e8c577
      iscommand: false
      name: Sleep
      scriptName: Sleep
      type: regular
      version: -1
    taskid: 131cde02-8588-46e6-8130-88b588e8c577
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 1885\n  }\n}"
  '4':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              simple: MsGraphFiles.UploadedFiles.Name
          operator: isEqualString
          right:
            value:
              simple: playbook1.txt
      - - left:
            iscontext: true
            value:
              complex:
                accessor: UploadedFiles.ParentReference.ID
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: UploadedFiles.DownloadUrl
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: UploadedFiles.ID
                root: MsGraphFiles
          operator: isExists
      - - left:
            iscontext: true
            value:
              complex:
                accessor: UploadedFiles.LastModifiedBy.Type
                root: MsGraphFiles
          operator: isExists
      label: 'yes'
    id: '4'
    ignoreworker: false
    nexttasks:
      'yes':
      - '7'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: d2351fe3-dba0-42f5-8974-eecc2d902ecb
      iscommand: false
      name: Test If File Was Uploaded In Context
      type: condition
      version: -1
    taskid: d2351fe3-dba0-42f5-8974-eecc2d902ecb
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 2905\n  }\n}"
  '40':
    id: '40'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '3'
    note: false
    quietmode: 0
    scriptarguments:
      seconds:
        simple: '2'
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sleep for X seconds
      id: b2660242-da9f-46c9-812c-31472bea0e8c
      iscommand: false
      name: Sleep
      scriptName: Sleep
      type: regular
      version: -1
    taskid: b2660242-da9f-46c9-812c-31472bea0e8c
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 2555\n  }\n}"
  '41':
    id: '41'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '5'
    note: false
    quietmode: 0
    scriptarguments:
      seconds:
        simple: '2'
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sleep for X seconds
      id: 45ce639e-4f3b-4c10-88d1-25a9a1d17bc1
      iscommand: false
      name: Sleep
      scriptName: Sleep
      type: regular
      version: -1
    taskid: 45ce639e-4f3b-4c10-88d1-25a9a1d17bc1
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 3925\n  }\n}"
  '42':
    id: '42'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '30'
    note: false
    quietmode: 0
    scriptarguments:
      seconds:
        simple: '7'
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sleep for X seconds
      id: 4f2b93b3-7fd3-4c30-8509-5c9f701ba40d
      iscommand: false
      name: sleep
      scriptName: Sleep
      type: regular
      version: -1
    taskid: 4f2b93b3-7fd3-4c30-8509-5c9f701ba40d
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 7160\n  }\n}"
  '43':
    id: '43'
    ignoreworker: false
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: b73fb110-b842-456d-8d04-1eaaffa55228
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: b73fb110-b842-456d-8d04-1eaaffa55228
    timertriggers: []
    type: title
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 7510\n  }\n}"
  '44':
    id: '44'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '15'
    note: false
    quietmode: 0
    scriptarguments:
      seconds:
        simple: '3'
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sleep for X seconds
      id: 1da7d48e-4558-4e8d-80c0-5a9c65b509f2
      iscommand: false
      name: sleep
      scriptName: Sleep
      type: regular
      version: -1
    taskid: 1da7d48e-4558-4e8d-80c0-5a9c65b509f2
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 5615\n  }\n}"
  '5':
    id: '5'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '36'
    note: false
    quietmode: 0
    scriptarguments:
      data:
        simple: test playbook 2
      entryId: {}
      filename:
        simple: playbook2.txt
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: 'Will create a file (using the given data input or entry ID) and
        upload it to current investigation war room.

        '
      id: ccd7cd19-bf26-4509-888a-e2fb05f70bf9
      iscommand: false
      name: Upload New File To Demisto
      scriptName: FileCreateAndUpload
      type: regular
      version: -1
    taskid: ccd7cd19-bf26-4509-888a-e2fb05f70bf9
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 4100\n  }\n}"
  '6':
    id: '6'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '37'
    note: false
    quietmode: 0
    scriptarguments:
      entry_id:
        complex:
          accessor: EntryID
          root: File
      item_id:
        complex:
          root: UploadedFileID
      object_type:
        simple: groups
      object_type_id:
        simple: 83900b2c-617f-4642-b778-17303be19009
    separatecontext: false
    skipunavailable: false
    task:
      brand: Microsoft_Graph_Files
      id: 93830c3c-d00c-472c-833a-300b15f65a1d
      iscommand: true
      name: Replace File's Content In MS Graph
      script: Microsoft_Graph_Files|||msgraph-replace-existing-file
      type: regular
      version: -1
    taskid: 93830c3c-d00c-472c-833a-300b15f65a1d
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 4450\n  }\n}"
  '7':
    id: '7'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '8'
    note: false
    quietmode: 0
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      id: 23125e2a-66a7-4de2-8057-40d0caf0139d
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: 23125e2a-66a7-4de2-8057-40d0caf0139d
    timertriggers: []
    type: title
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 3080\n  }\n}"
  '8':
    id: '8'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '31'
    note: false
    quietmode: 0
    scriptarguments:
      all:
        simple: 'no'
      index: {}
      key:
        simple: File
      keysToKeep: {}
      subplaybook: {}
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Delete field from context
      id: a7276442-a251-4fa7-8032-fac72fa9d71e
      iscommand: false
      name: Delete File Context
      scriptName: DeleteContext
      type: regular
      version: -1
    taskid: a7276442-a251-4fa7-8032-fac72fa9d71e
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 3225\n  }\n}"
  '9':
    id: '9'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '10'
    note: false
    quietmode: 0
    scriptarguments:
      key:
        simple: UploadedFileID
      value:
        complex:
          accessor: UploadedFiles.ID
          root: MsGraphFiles
    separatecontext: false
    skipunavailable: false
    task:
      brand: ''
      description: Sets key/value pair in incident's context
      id: 79e0cccc-34cc-4c23-89fa-0c6c46d03b12
      iscommand: false
      name: Save File ID
      scriptName: SetContext
      type: regular
      version: -1
    taskid: 79e0cccc-34cc-4c23-89fa-0c6c46d03b12
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 50,\n    \"y\": 3575\n  }\n}"
toversion: 4.1.9
version: -1
view: "{\n  \"linkLabelsPosition\": {},\n  \"paper\": {\n    \"dimensions\": {\n \
  \     \"height\": 7525,\n      \"width\": 380,\n      \"x\": 50,\n      \"y\": 50\n\
  \    }\n  }\n}"
