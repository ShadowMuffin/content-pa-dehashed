args:
- description: Object to convert
  name: value
  required: true
comment: 'Convert object keys to match table keys.

  Use when mapping object/collection to table (grid) field.

  (Array of objects/collections is also supported).

  Example:

  Input: { "Engine": "val1", "Max Results": 13892378, "Key_With^Special   (characters)":
  true }

  Output: { "engine": "val1", "maxresults": 13892378, "keywithspecialcharacters":
  true }'
commonfields:
  id: ConvertKeysToTableFieldFormat
  version: -1
enabled: true
name: ConvertKeysToTableFieldFormat
runas: DBotWeakRole
runonce: false
script: "// convert a specific key\nfunction stripToCliName(str) {\n  return str.substr(0,\
  \ 255).replace(/[\\W\\s\\\\&$#@%?!_*;\u05F3()^]/g, '').toLowerCase();\n}\n\n// convert\
  \ object keys\nfunction convertObject(obj) {\n    var res = {};\n    Object.keys(obj).forEach(function(key)\
  \ {\n        res[stripToCliName(key)] = obj[key];\n    });\n    return res;\n}\n\
  \nvar value = args.value;\n\nif (typeof value !== \"object\") {\n    return {\n\
  \        ContentsFormat: formats.text,\n        Type: entryTypes.error,\n      \
  \  Contents: 'Invalid input. Expected object/collection, got: ' + value\n    };\n\
  }\n\nif (Array.isArray(value)) {\n    return value.map(convertObject);\n}\n\nreturn\
  \ convertObject(value);\n\n\n\n"
scripttarget: 0
tags:
- transformer
toversion: 4.1.9
type: javascript
