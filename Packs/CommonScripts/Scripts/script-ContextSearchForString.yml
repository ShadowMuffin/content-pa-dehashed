args:
- description: Path in context to search the string in
  name: path
- description: String to search for in context
  name: str
  required: true
comment: 'Searches for string in a path in context. If path is null, string will be
  searched in full context.

  '
commonfields:
  id: ContextSearchForString
  version: -1
enabled: true
name: ContextSearchForString
outputs:
- contextPath: true
  description: if given string exists in context
- contextPath: false
  description: if given string does not exist in context
script: "var path = args.path;\nvar str = args.str;\nvar flat={};\n\nfunction searchString(obj)\
  \ {\n    flattenFields(obj,undefined,flat);\n    keysArr = Object.keys(flat);\n\
  \    for (i = 0; i < keysArr.length - 1; i++) {\n        if (flat[keysArr[i]] ===\
  \ str) {\n            return true;\n        }\n    }\n    return false;\n}\n\nif\
  \ (!path) {\n    return searchString(invContext);\n}\n\nvar contextObject = dq(invContext,\
  \ path);\n\nif (!contextObject) {\n    throw 'Path ' + path + ' is not in the context.';\n\
  }\n\nreturn searchString(contextObject);\n\n\n"
scripttarget: 0
tags: []
toversion: 4.1.9
type: javascript
