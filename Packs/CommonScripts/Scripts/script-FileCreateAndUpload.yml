args:
- default: true
  description: The name of the file to be created
  name: filename
  required: true
- description: input data to write to file
  name: data
- description: Entry ID contents to write into file
  name: entryId
comment: 'Will create a file (using the given data input or entry ID) and upload it
  to current investigation war room.

  '
commonfields:
  id: FileCreateAndUpload
  version: -1
enabled: true
name: FileCreateAndUpload
script: "if (!args.data && !args.entryId) {\n    return { ContentsFormat: formats.text,\
  \ Type: entryTypes.error, Contents: 'Either data or entryId arguments need to be\
  \ provided.' };\n}\nif (args.data && args.entryId) {\n    return { ContentsFormat:\
  \ formats.text, Type: entryTypes.error, Contents: 'Cannot provide both data and\
  \ entryId arguments.' };\n}\n\nvar data = \"\";\nif (args.data) {\n    data = args.data;\n\
  }\nif (args.entryId) {\n    var res = executeCommand(\"getEntry\", {\"id\":args.entryId});\n\
  \    if (res[0].Type === entryTypes.error) {\n        return res;\n    }\n    data\
  \ = res[0].Contents;\n}\nvar createdFileID = saveFile(data);\nreturn {Type: 3, FileID:\
  \ createdFileID, File: args.filename, Contents: args.filename};"
scripttarget: 0
tags:
- Utility
toversion: 4.1.9
type: javascript
