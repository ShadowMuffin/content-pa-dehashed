comment: Expose the incident owner into IncidentOwner context key
commonfields:
  id: ExposeIncidentOwner
  version: -1
enabled: true
name: ExposeIncidentOwner
outputs:
- contextPath: IncidentOwner.name
  description: Incident owner full name
- contextPath: IncidentOwner.email
  description: Incident owner email address
- contextPath: IncidentOwner.phone
  description: Incident owner phone number
- contextPath: IncidentOwner.roles
  description: Incident owner roles
script: "var owner = incidents[0].owner;\nowner = owner.replace(/\\\\/g,'\\\\\\\\\
  ');\nvar users = executeCommand('getUsers', {});\nvar ownerJSON = dq(users,'Contents(val.username===\"\
  ' + owner + '\")');\nif (ownerJSON) {\n    setContext('IncidentOwner',ownerJSON);\n\
  \    return 'Incident owner set in IncidentOwner context key';\n} else {\n    return\
  \ 'Incident has no owner';\n}"
scripttarget: 0
tags:
- Utility
toversion: 4.1.9
type: javascript
