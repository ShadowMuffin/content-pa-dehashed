comment: Sends email to incident owner when selected field is triggered.
commonfields:
  id: emailFieldTriggered
  version: -1
dependson:
  must:
  - send-mail
enabled: true
name: emailFieldTriggered
script: "var users = executeCommand('getUsers', {});\nvar email;\nfor (var i = 0;\
  \ i < users[0].Contents.length; i++) {\n    if (incidents[0].owner === users[0].Contents[i].name)\
  \ {\n        email = users[0].Contents[i].email;\n        break;\n    }\n}\nif (email)\
  \ {\n    var body = 'Hello,\\nField ' + args.name + ' was changed from ' + args.old\
  \ + ' to ' + args.new + ' in incident ' + incidents[0].name + '.\\n--DBot';\n  \
  \  var subject = 'Field ' + args.name + ' was triggered';\n    executeCommand('send-mail',\
  \ {'to':email, 'subject':subject, 'body':body});\n}"
scripttarget: 0
tags:
- field-change-triggered
toversion: 4.1.9
type: javascript
