id: Google-KMS-test
inputs: []
name: Google-KMS-test
outputs: []
starttaskid: '0'
tasks:
  '0':
    id: '0'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '1'
    note: false
    separatecontext: false
    task:
      brand: ''
      id: 6b37caf1-7f7a-4a96-88bf-64ac48c48b1b
      iscommand: false
      name: ''
      version: -1
    taskid: 6b37caf1-7f7a-4a96-88bf-64ac48c48b1b
    timertriggers: []
    type: start
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": -310\n  }\n}"
  '1':
    id: '1'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '46'
    note: false
    scriptarguments:
      all:
        simple: 'yes'
      index: {}
      key: {}
      keysToKeep: {}
      subplaybook: {}
    separatecontext: false
    task:
      brand: ''
      description: Delete field from context
      id: 1ecdbcd9-ac17-4049-890b-c00bbd37705e
      iscommand: false
      name: DeleteContext
      scriptName: DeleteContext
      type: regular
      version: -1
    taskid: 1ecdbcd9-ac17-4049-890b-c00bbd37705e
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": -140\n  }\n}"
  '10':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                accessor: CryptoKey.PrimaryCryptoKeyVersion.State
                filters:
                - - left:
                      iscontext: true
                      value:
                        simple: GoogleKMS.CryptoKey.Name
                    operator: containsString
                    right:
                      value:
                        simple: new_name1
                root: GoogleKMS
          operator: isEqualString
          right:
            value:
              simple: DESTROY_SCHEDULED
      label: 'yes'
    id: '10'
    ignoreworker: false
    nexttasks:
      'yes':
      - '11'
    note: false
    separatecontext: false
    task:
      brand: ''
      id: 0660a6ee-b4f5-43ab-8ca2-577289f3ac8d
      iscommand: false
      name: Check key destruction
      type: condition
      version: -1
    taskid: 0660a6ee-b4f5-43ab-8ca2-577289f3ac8d
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 1120\n  }\n}"
  '11':
    id: '11'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '12'
    note: false
    scriptarguments:
      crypto_key:
        simple: new_name1
      crypto_key_id:
        simple: new_name1
      crypto_key_version: {}
      key_ring: {}
      key_ring_id: {}
      location: {}
      location_id: {}
    separatecontext: false
    task:
      brand: ''
      description: Restore the primary CryptoKeyVersion of a given CryptoKey
      id: 2a1fbba6-7d30-43b2-843a-b3ce799c0d03
      iscommand: true
      name: google-kms-restore-key
      script: '|||google-kms-restore-key'
      type: regular
      version: -1
    taskid: 2a1fbba6-7d30-43b2-843a-b3ce799c0d03
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 1330\n  }\n}"
  '12':
    id: '12'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '13'
    note: false
    scriptarguments:
      crypto_key:
        simple: new_name1
      crypto_key_id:
        simple: new_name1
      key_ring: {}
      key_ring_id: {}
      location: {}
      location_id: {}
    separatecontext: false
    task:
      brand: ''
      description: Returns metadata for a given CryptoKey, as well as its primary
        CryptoKeyVersion.
      id: 3ebc1f45-7bfa-4565-8499-64ed331ad91b
      iscommand: true
      name: google-kms-get-key
      script: '|||google-kms-get-key'
      type: regular
      version: -1
    taskid: 3ebc1f45-7bfa-4565-8499-64ed331ad91b
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 1510\n  }\n}"
  '13':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                accessor: CryptoKey.PrimaryCryptoKeyVersion.State
                filters:
                - - left:
                      iscontext: true
                      value:
                        simple: GoogleKMS.CryptoKey.Name
                    operator: containsString
                    right:
                      value:
                        simple: new_name1
                root: GoogleKMS
          operator: isEqualString
          right:
            value:
              simple: DISABLED
      label: 'yes'
    id: '13'
    ignoreworker: false
    nexttasks:
      'yes':
      - '14'
    note: false
    separatecontext: false
    task:
      brand: ''
      id: 5a9f0c30-2b4b-4893-850a-fa6fa789bd17
      iscommand: false
      name: Check key restoration
      type: condition
      version: -1
    taskid: 5a9f0c30-2b4b-4893-850a-fa6fa789bd17
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 1680\n  }\n}"
  '14':
    id: '14'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '15'
    note: false
    scriptarguments:
      crypto_key:
        simple: new_name1
      crypto_key_id:
        simple: new_name1
      crypto_key_version: {}
      key_ring: {}
      key_ring_id: {}
      location: {}
      location_id: {}
    separatecontext: false
    task:
      brand: ''
      description: Enable the primary CryptoKeyVersion of a given CryptoKey
      id: 4a9823e5-88da-46f0-8cff-eaa76e6b4e75
      iscommand: true
      name: google-kms-enable-key
      script: '|||google-kms-enable-key'
      type: regular
      version: -1
    taskid: 4a9823e5-88da-46f0-8cff-eaa76e6b4e75
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 1870\n  }\n}"
  '15':
    id: '15'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '16'
    note: false
    scriptarguments:
      crypto_key:
        simple: new_name1
      crypto_key_id:
        simple: new_name1
      key_ring: {}
      key_ring_id: {}
      location: {}
      location_id: {}
    separatecontext: false
    task:
      brand: ''
      description: Returns metadata for a given CryptoKey, as well as its primary
        CryptoKeyVersion.
      id: b56a42b0-36c7-4c22-8d47-b3debd758ae1
      iscommand: true
      name: google-kms-get-key
      script: '|||google-kms-get-key'
      type: regular
      version: -1
    taskid: b56a42b0-36c7-4c22-8d47-b3debd758ae1
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 2050\n  }\n}"
  '16':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                accessor: CryptoKey.PrimaryCryptoKeyVersion.State
                filters:
                - - left:
                      iscontext: true
                      value:
                        simple: GoogleKMS.CryptoKey.Name
                    operator: containsString
                    right:
                      value:
                        simple: new_name1
                root: GoogleKMS
          operator: isEqualString
          right:
            value:
              simple: ENABLED
      label: 'yes'
    id: '16'
    ignoreworker: false
    nexttasks:
      'yes':
      - '17'
    note: false
    separatecontext: false
    task:
      brand: ''
      id: 7a3f28d6-41ad-4a37-878e-60b88f76858c
      iscommand: false
      name: Check key enabled
      type: condition
      version: -1
    taskid: 7a3f28d6-41ad-4a37-878e-60b88f76858c
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 2230\n  }\n}"
  '17':
    id: '17'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '18'
    note: false
    scriptarguments:
      crypto_key:
        simple: new_name1
      crypto_key_id:
        simple: new_name1
      crypto_key_version: {}
      key_ring: {}
      key_ring_id: {}
      location: {}
      location_id: {}
    separatecontext: false
    task:
      brand: ''
      description: Disable the primary CryptoKeyVersion of a given CryptoKey
      id: a7c7fde5-d935-4ad5-8df4-969ed1493405
      iscommand: true
      name: google-kms-disable-key
      script: '|||google-kms-disable-key'
      type: regular
      version: -1
    taskid: a7c7fde5-d935-4ad5-8df4-969ed1493405
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 2420\n  }\n}"
  '18':
    id: '18'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '19'
    note: false
    scriptarguments:
      crypto_key:
        simple: new_name1
      crypto_key_id:
        simple: new_name1
      key_ring: {}
      key_ring_id: {}
      location: {}
      location_id: {}
    separatecontext: false
    task:
      brand: ''
      description: Returns metadata for a given CryptoKey, as well as its primary
        CryptoKeyVersion.
      id: 876c5f24-4a6f-42a8-80ad-041fd9d0984f
      iscommand: true
      name: google-kms-get-key
      script: '|||google-kms-get-key'
      type: regular
      version: -1
    taskid: 876c5f24-4a6f-42a8-80ad-041fd9d0984f
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 2600\n  }\n}"
  '19':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              complex:
                accessor: CryptoKey.PrimaryCryptoKeyVersion.State
                filters:
                - - left:
                      iscontext: true
                      value:
                        simple: GoogleKMS.CryptoKey.Name
                    operator: containsString
                    right:
                      value:
                        simple: new_name1
                root: GoogleKMS
          operator: isEqualString
          right:
            value:
              simple: DISABLED
      label: 'yes'
    id: '19'
    ignoreworker: false
    nexttasks:
      'yes':
      - '20'
    note: false
    separatecontext: false
    task:
      brand: ''
      id: 3268fced-b409-4644-87a2-bc62e97f0385
      iscommand: false
      name: Check key disabled
      type: condition
      version: -1
    taskid: 3268fced-b409-4644-87a2-bc62e97f0385
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 2760\n  }\n}"
  '20':
    id: '20'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '34'
    note: false
    scriptarguments:
      crypto_key:
        simple: new_name1
      crypto_key_id:
        simple: new_name1
      crypto_key_version: {}
      key_ring: {}
      key_ring_id: {}
      location: {}
      location_id: {}
    separatecontext: false
    task:
      brand: ''
      description: Enable the primary CryptoKeyVersion of a given CryptoKey
      id: 015bf721-4d45-48ca-85a9-9708066e9c3f
      iscommand: true
      name: google-kms-enable-key
      script: '|||google-kms-enable-key'
      type: regular
      version: -1
    taskid: 015bf721-4d45-48ca-85a9-9708066e9c3f
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 2950\n  }\n}"
  '3':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              simple: GoogleKMS.CryptoKey.Name
          operator: containsGeneral
          right:
            value:
              simple: TestCryptoKey
      label: 'yes'
    id: '3'
    ignoreworker: false
    nexttasks:
      'yes':
      - '8'
      - '36'
      - '40'
    note: false
    separatecontext: false
    task:
      brand: ''
      id: 5f7e120e-35ad-4595-8fc9-fcd3b8631acd
      iscommand: false
      name: Check CryptoKey
      type: condition
      version: -1
    taskid: 5f7e120e-35ad-4595-8fc9-fcd3b8631acd
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 540\n  }\n}"
  '34':
    id: '34'
    ignoreworker: false
    note: false
    separatecontext: false
    task:
      brand: ''
      id: 569ac20f-fac0-4290-8167-dbf37363904e
      iscommand: false
      name: Done
      type: title
      version: -1
    taskid: 569ac20f-fac0-4290-8167-dbf37363904e
    timertriggers: []
    type: title
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 3140\n  }\n}"
  '35':
    id: '35'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '3'
    note: false
    scriptarguments:
      key_ring_id: {}
      key_state:
        simple: ENABLED
      location_id: {}
    separatecontext: false
    task:
      brand: ''
      description: Lists all keys in key ring
      id: fd8a147e-b6aa-4a42-89ad-0ce93fa5af7f
      iscommand: true
      name: google-kms-list-keys
      script: '|||google-kms-list-keys'
      type: regular
      version: -1
    taskid: fd8a147e-b6aa-4a42-89ad-0ce93fa5af7f
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 365\n  }\n}"
  '36':
    id: '36'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '38'
    note: false
    scriptarguments:
      base64_plaintext: {}
      crypto_key:
        simple: asy256-4
      crypto_key_version:
        simple: '1'
      entry_id: {}
      is_base64:
        simple: 'false'
      key_ring: {}
      location: {}
      plaintext:
        simple: some text
      simple_plaintext:
        simple: some text
    separatecontext: false
    task:
      brand: ''
      description: Encrypt using a asymmetric CryptoKey
      id: 1d603c4c-1be5-4ace-8a41-7bc430a34d99
      iscommand: true
      name: google-kms-asymmetric-encrypt
      script: '|||google-kms-asymmetric-encrypt'
      type: regular
      version: -1
    taskid: 1d603c4c-1be5-4ace-8a41-7bc430a34d99
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 950,\n    \"y\": 750\n  }\n}"
  '38':
    id: '38'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '39'
    note: false
    scriptarguments:
      base64_ciphertext: {}
      ciphertext:
        simple: ${GoogleKMS.AsymmetricEncrypt.Ciphertext}
      crypto_key:
        simple: asy256-4
      crypto_key_version:
        simple: '1'
      entry_id: {}
      is_base64:
        simple: 'false'
      key_ring: {}
      location: {}
      simple_ciphertext:
        simple: ${GoogleKMS.AsymmetricEncrypt.Ciphertext}
    separatecontext: false
    task:
      brand: ''
      description: Decrypt using an asymmetric CryptoKey
      id: 997bc264-045e-4fb0-8064-5f4f1a94b473
      iscommand: true
      name: google-kms-asymmetric-decrypt
      script: '|||google-kms-asymmetric-decrypt'
      type: regular
      version: -1
    taskid: 997bc264-045e-4fb0-8064-5f4f1a94b473
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 950,\n    \"y\": 960\n  }\n}"
  '39':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              simple: GoogleKMS.AsymmetricDecrypt.Plaintext
          operator: isEqualString
          right:
            value:
              simple: some text
      label: 'yes'
    id: '39'
    ignoreworker: false
    nexttasks:
      'yes':
      - '34'
    note: false
    separatecontext: false
    task:
      brand: ''
      id: 37842385-5f0e-4144-8d41-18be7e8593de
      iscommand: false
      name: check asymmetric decryption
      type: condition
      version: -1
    taskid: 37842385-5f0e-4144-8d41-18be7e8593de
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 950,\n    \"y\": 1150\n  }\n}"
  '40':
    id: '40'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '42'
    note: false
    scriptarguments:
      additional_authenticated_data: {}
      base64_plaintext: {}
      crypto_key:
        simple: TestCryptoKey
      entry_id: {}
      key_ring: {}
      location: {}
      simple_plaintext:
        simple: some text
    separatecontext: false
    task:
      brand: ''
      description: Encrypts data, so that it can only be recovered by a call to Decrypt.
      id: b6201cef-5959-4a40-80aa-44cf703f9726
      iscommand: true
      name: google-kms-symmetric-encrypt
      script: '|||google-kms-symmetric-encrypt'
      type: regular
      version: -1
    taskid: b6201cef-5959-4a40-80aa-44cf703f9726
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": -30,\n    \"y\": 750\n  }\n}"
  '42':
    id: '42'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '43'
    note: false
    scriptarguments:
      additional_authenticated_data: {}
      base64_ciphertext: {}
      ciphertext:
        simple: ${GoogleKMS.SymmetricEncrypt.Ciphertext}
      crypto_key:
        simple: TestCryptoKey
      entry_id: {}
      is_base64:
        simple: 'false'
      key_ring: {}
      location: {}
      simple_ciphertext:
        simple: ${GoogleKMS.SymmetricEncrypt.Ciphertext}
    separatecontext: false
    task:
      brand: ''
      description: Decrypts data that was protected by Encrypt.
      id: b8e90038-63f0-4754-8e6c-6cd97155461f
      iscommand: true
      name: google-kms-symmetric-decrypt
      script: '|||google-kms-symmetric-decrypt'
      type: regular
      version: -1
    taskid: b8e90038-63f0-4754-8e6c-6cd97155461f
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": -30,\n    \"y\": 960\n  }\n}"
  '43':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              simple: GoogleKMS.SymmetricDecrypt.Plaintext
          operator: isEqualString
          right:
            value:
              simple: some text
      label: 'yes'
    id: '43'
    ignoreworker: false
    nexttasks:
      'yes':
      - '34'
    note: false
    separatecontext: false
    task:
      brand: ''
      id: da28139b-33cf-4f93-8161-021626264466
      iscommand: false
      name: check symmetric decrypt
      type: condition
      version: -1
    taskid: da28139b-33cf-4f93-8161-021626264466
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": -30,\n    \"y\": 1150\n  }\n}"
  '44':
    id: '44'
    ignoreworker: false
    note: false
    scriptarguments:
      crypto_key:
        simple: asy512
      crypto_key_version:
        simple: '1'
      key_ring: {}
      location: {}
    separatecontext: false
    task:
      brand: ''
      description: Gets the public key from a given CryptoKey
      id: 8fa9b7bb-d71d-46ee-869a-9ec90184526a
      iscommand: true
      name: google-kms-get-public-key
      script: '|||google-kms-get-public-key'
      type: regular
      version: -1
    taskid: 8fa9b7bb-d71d-46ee-869a-9ec90184526a
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 920,\n    \"y\": 365\n  }\n}"
  '45':
    id: '45'
    ignoreworker: false
    note: false
    scriptarguments:
      all:
        simple: 'no'
      key_state:
        simple: ENABLED
      location:
        simple: global
    separatecontext: false
    task:
      brand: ''
      description: List all CryptoKeys across all KeyRings in a given location
      id: ca95c7f1-b57f-4620-8cd0-b67f33e861b9
      iscommand: true
      name: google-kms-list-all-keys
      script: '|||google-kms-list-all-keys'
      type: regular
      version: -1
    taskid: ca95c7f1-b57f-4620-8cd0-b67f33e861b9
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 20,\n    \"y\": 365\n  }\n}"
  '46':
    id: '46'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '47'
    note: false
    scriptarguments:
      all: {}
      location:
        simple: global
    separatecontext: false
    task:
      brand: ''
      description: List all KeyRings in a given location
      id: f8ed8df5-7426-4407-870e-6206b5a059d6
      iscommand: true
      name: google-kms-list-key-rings
      script: '|||google-kms-list-key-rings'
      type: regular
      version: -1
    taskid: f8ed8df5-7426-4407-870e-6206b5a059d6
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 50\n  }\n}"
  '47':
    conditions:
    - condition:
      - - left:
            iscontext: true
            value:
              simple: GoogleKMS.KeyRing.Name
          operator: containsString
          right:
            value:
              simple: TestKeyRing
      label: 'yes'
    id: '47'
    ignoreworker: false
    nexttasks:
      'yes':
      - '35'
      - '44'
      - '45'
    note: false
    separatecontext: false
    task:
      brand: ''
      id: ff0eea44-0623-4d3e-8a9e-cfeec0e12eae
      iscommand: false
      name: Checking  KeyRing
      type: condition
      version: -1
    taskid: ff0eea44-0623-4d3e-8a9e-cfeec0e12eae
    timertriggers: []
    type: condition
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 200\n  }\n}"
  '8':
    id: '8'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '9'
    note: false
    scriptarguments:
      crypto_key:
        simple: new_name1
      crypto_key_id:
        simple: new_name1
      crypto_key_version: {}
      key_ring: {}
      key_ring_id: {}
      location: {}
      location_id: {}
    separatecontext: false
    task:
      brand: ''
      description: Destroy the primary CryptoKeyVersion of a given CryptoKey
      id: fa4c3b6a-44cb-4bef-81a0-73a80fd671bb
      iscommand: true
      name: google-kms-destroy-key
      script: '|||google-kms-destroy-key'
      type: regular
      version: -1
    taskid: fa4c3b6a-44cb-4bef-81a0-73a80fd671bb
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 750\n  }\n}"
  '9':
    id: '9'
    ignoreworker: false
    nexttasks:
      '#none#':
      - '10'
    note: false
    scriptarguments:
      crypto_key:
        simple: new_name1
      crypto_key_id:
        simple: new_name1
      key_ring: {}
      key_ring_id: {}
      location: {}
      location_id: {}
    separatecontext: false
    task:
      brand: ''
      description: Returns metadata for a given CryptoKey, as well as its primary
        CryptoKeyVersion.
      id: 64b50ef2-9781-4ae7-8006-3d9767949885
      iscommand: true
      name: google-kms-get-key
      script: '|||google-kms-get-key'
      type: regular
      version: -1
    taskid: 64b50ef2-9781-4ae7-8006-3d9767949885
    timertriggers: []
    type: regular
    view: "{\n  \"position\": {\n    \"x\": 450,\n    \"y\": 920\n  }\n}"
toversion: 4.1.9
version: -1
view: "{\n  \"linkLabelsPosition\": {},\n  \"paper\": {\n    \"dimensions\": {\n \
  \     \"height\": 3515,\n      \"width\": 1360,\n      \"x\": -30,\n      \"y\"\
  : -310\n    }\n  }\n}"
